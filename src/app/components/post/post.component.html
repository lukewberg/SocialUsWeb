<div class="vertical post-container">
    <div class="horizontal flex-start" style="padding: 8px; width: 100%;">
        <div [routerLink]="['/profile']" [queryParams]="{uid: authorProfile?.id}" class="profile-picture" [style]="'background-image: url(' + authorProfile?.photoUrl + ');'"></div>
        <div [routerLink]="['/profile']" [queryParams]="{uid: authorProfile?.id}" class="vertical" style="align-items: flex-start; outline: none;">
            <span class="profile-display-name">{{authorProfile?.displayName}}</span>
            <span class="profile-handle">@{{authorProfile?.username}}</span>
        </div>
        <div style="flex: 1;"></div>
        <div *ngIf="isGame" class="game-icn"></div>
    </div>
    <div *ngIf="isGame && isTicTacToe" class="tictactoe-container vertical center">
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareOne == 'X', 'o': post?.squareOne == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareTwo == 'X', 'o': post?.squareTwo == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareThree == 'X', 'o': post?.squareThree == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareFour == 'X', 'o': post?.squareFour == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareFive == 'X', 'o': post?.squareFive == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareSix == 'X', 'o': post?.squareSix == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareSeven == 'X', 'o': post?.squareSeven == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareEight == 'X', 'o': post?.squareEight == 'O'}"></div>
        </div>
        <div class="square vertical center">
            <div [ngClass]="{'x': post?.squareNine == 'X', 'o': post?.squareNine == 'O'}"></div>
        </div>
    </div>
    <div *ngIf="isGame && isTicTacToe" class="tictactoe-game-info-container horizontal center">
        <div class="player-container horizontal center">
            <div class="profile-picture" [style]="'background-image: url(' + authorProfile?.photoUrl + ');'"></div>
            <span class="profile-display-name">{{authorProfile?.displayName}}</span>
        </div>
        <span style="margin: 0 20px; font-family: LatoBlack; font-size: 18px;">VS</span>
        <div class="player-container horizontal center">
            <div class="profile-picture" [style]="'background-image: url(' + opponentProfile?.photoUrl + ');'"></div>
            <span class="profile-display-name">{{opponentProfile?.displayName}}</span>
        </div>
    </div>
    <div *ngIf="!isVideo && !isGame && post.mediaUrl.length > 0" class="post-img" [style]="'background-image: url(' + post?.mediaUrl + ');'"></div>
    <div *ngIf="isVideo" class="video-container">
        <video (loadeddata)="onVideoLoad($event)" (click)="toggleVideo()" (timeupdate)="videoPlayingCallback($event)" #video class="video" [src]="post.mediaUrl"></video>
        <div *ngIf="!videoIsToggled" (click)="toggleVideo()" class="video-play-pause-button"></div>
        <div class="video-scrub-container">
            <div #scrubBar (mouseenter)="pointerInScrub = true" (mouseleave)="pointerInScrub = false"
            (mousemove)="pointerInScrub && isMouseDown ? videoScrub($event) : undefined" (mousedown)="isMouseDown = true" (mouseup)="isMouseDown = false"
            class="scrub-bar horizontal flex-start">
                <div #progressBar class="progress" [style]="'width: ' + videoProgress + '%;'"></div>
                <div class="scrub-button horizontal center"></div>
            </div>
        </div>
    </div>
    <div *ngIf="post?.description.length > 0 && !isGame && post.mediaUrl.length > 0" class="post-content-box vertical" style="align-items: flex-start;">
        <p>
            <span class="author-username">{{post?.username? post?.username + ':   ' : authorProfile?.username + ':   '}}</span>
            <span class="post-description">{{post?.description}}</span>
        </p>
    </div>
    <div *ngIf="post?.description.length > 0 && !isGame && post.mediaUrl.length == 0" class="horizontal text-only-container">
        <div class="text-only-sidebar"></div>
        <span class="text-only-content">{{post?.description}}</span>
    </div>
    <div *ngIf="post.comments?.length > 0 && post.comments && !isGame" style="padding: 0 15px; width: 100%;">
        <div class="post-comments-box vertical">
          <app-chat style="align-self: flex-start; width: 100%;" *ngFor="let comment of post?.comments" [comment]="comment">
          </app-chat>
        </div>
    </div>
    <div *ngIf="!isGame" class="horizontal end" style="width: 100%; padding: 5px 10px 10px 10px;">
        <div class="comment-container horizontal start" style="width: 100%;">
            <div class="horizontal center">
                <div (click)="like()" class="interaction-button" [ngClass]="{'like-button-unliked': !isLiked, 'like-button-liked': isLiked}"></div>
                <span *ngIf="post?.likes?.length > 0" class="like-count">{{formatNumber(post.likes.length)}}{{post.likes.length > 1 ? ' likes' : ' like'}}</span>
            </div>
            <div style="flex: 1;"></div>
            <div class="horizontal end" style="width: 500px;">
                <div class="profile-picture" [style]="'background-image: url(' + currentUser.photoUrl + ');'"></div>
            <div #commentInput class="input horizontal" placeholder="Write a comment..." (input)="comment=$event.target.textContent"
            contenteditable="true"></div>
            <div (click)="postComment()" class="send-button action-button"></div>
            </div>
        </div>
    </div>
</div>